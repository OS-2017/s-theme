!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(a){return e.Tablesaw=t(a,e)}):"object"==typeof exports?"document"in e?module.exports=t(require("jquery"),e):module.exports=t(require("jquery")(e),e):e.Tablesaw=t(jQuery,e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var a=t.document,s=/complete|loaded/.test(a.readyState);a.addEventListener("DOMContentLoaded",function(){s=!0});var n={i18n:{modeStack:"Stack",modeSwipe:"Swipe",modeToggle:"Toggle",modeSwitchColumnsAbbreviated:"Cols",modeSwitchColumns:"Columns",columnToggleButton:"Columns",columnToggleError:"No eligible columns.",sort:"Sort",swipePreviousColumn:"Previous column",swipeNextColumn:"Next column"},mustard:"head"in a&&(!t.blackberry||t.WebKitPoint)&&!t.operamini,$:e,_init:function(e){n.$(e||a).trigger("enhance.tablesaw")},init:function(e){s=s||/complete|loaded/.test(a.readyState),s?n._init(e):"addEventListener"in a&&a.addEventListener("DOMContentLoaded",function(){n._init(e)})}};return e(a).on("enhance.tablesaw",function(){"undefined"!=typeof TablesawConfig&&TablesawConfig.i18n&&(n.i18n=e.extend(n.i18n,TablesawConfig.i18n||{})),n.i18n.modes=[n.i18n.modeStack,n.i18n.modeSwipe,n.i18n.modeToggle]}),n.mustard&&e(a.documentElement).addClass("tablesaw-enhanced"),function(){var s="tablesaw",i={toolbar:"tablesaw-bar"},o={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},l="stack",r="table",c="[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]",d={};n.events=o;var h=function(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t,this.$table=e(t),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||l,this.$toolbar=null,this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow"},this.init()};h.prototype.init=function(){if(!this.$thead.length)throw new Error("tablesaw: a <thead> is required, but none was found.");if(!this.$thead.find("th").length)throw new Error("tablesaw: no header cells found. Are you using <th> inside of <thead>?");this.$table.attr("id")||this.$table.attr("id",s+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(s,this),this.$table.trigger(o.create,[this])},h.prototype.getConfig=function(t){var a=e.extend(d,t||{});return e.extend(a,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},h.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},h.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!e(this).is("[data-tablesaw-ignorerow]")})},h.prototype._getRowIndex=function(e){return e.prevAll().length},h.prototype._getHeaderRowIndeces=function(){var t=this,a=[];return this._getHeaderRows().each(function(){a.push(t._getRowIndex(e(this)))}),a},h.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},h.prototype._$getCells=function(t){var a=this;return e(t).add(t.cells).filter(function(){var t=e(this),s=t.parent(),n=t.is("[colspan]");return!(s.is("["+a.attributes.subrow+"]")||s.is("["+a.attributes.ignorerow+"]")&&n)})},h.prototype._getVisibleColspan=function(){var t=0;return this._getPrimaryHeaderCells().each(function(){var a=e(this);"none"!==a.css("display")&&(t+=parseInt(a.attr("colspan"),10)||1)}),t},h.prototype.getColspanForCell=function(t){var a=this._getVisibleColspan(),s=0;return t.closest("tr").data("tablesaw-rowspanned")&&s++,t.siblings().each(function(){var t=e(this),a=parseInt(t.attr("colspan"),10)||1;"none"!==t.css("display")&&(s+=a)}),a-s},h.prototype.isCellInColumn=function(t,a){return e(t).add(t.cells).filter(function(){return this===a}).length},h.prototype.updateColspanCells=function(t,a,s){var n=this,i=n._getPrimaryHeaderRow();this.$table.find("[rowspan][data-tablesaw-priority]").each(function(){var t=e(this);if("persist"===t.attr("data-tablesaw-priority")){var a=t.closest("tr"),s=parseInt(t.attr("rowspan"),10);s>1&&(a=a.next(),a.data("tablesaw-rowspanned",!0),s--)}}),this.$table.find("[colspan],[data-tablesaw-maxcolspan]").filter(function(){return e(this).closest("tr")[0]!==i[0]}).each(function(){var i=e(this);if(void 0===s||n.isCellInColumn(a,this)){var o=n.getColspanForCell(i);t&&void 0!==s&&i[0===o?"addClass":"removeClass"](t);var l=parseInt(i.attr("data-tablesaw-maxcolspan"),10);l?o>l&&(o=l):i.attr("data-tablesaw-maxcolspan",i.attr("colspan")),i.attr("colspan",o)}})},h.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),a=this._getRowIndex(t),s=[],n=0;n<this.headerMapping.length;n++)if(n!==a)for(var i=0;i<this.headerMapping[n].length;i++)this.headerMapping[n][i]===e&&s.push(this.headerMapping[a][i]);return s},h.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return e(this).closest("table").is(t.$table)})},h.prototype.getBodyRows=function(t){return(t?e(t):this.$tbody).children().filter("tr")},h.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],a=0;a<t.length;a++)if(t[a]===e)return a;return-1},h.prototype._initCells=function(){this.$table.find("[data-tablesaw-maxcolspan]").each(function(){var t=e(this);t.attr("colspan",t.attr("data-tablesaw-maxcolspan"))});var t=this.getRows(),a=[];t.each(function(e){a[e]=[]}),t.each(function(t){var s=0,n=e(this),i=n.children();i.each(function(){for(var e=parseInt(this.getAttribute("data-tablesaw-maxcolspan")||this.getAttribute("colspan"),10),n=parseInt(this.getAttribute("rowspan"),10);a[t][s];)s++;if(a[t][s]=this,e)for(var i=0;i<e-1;i++)s++,a[t][s]=this;if(n)for(var o=1;o<n;o++)a[t+o][s]=this;s++})});for(var s=this._getHeaderRowIndeces(),n=0;n<a[0].length;n++)for(var i=0,o=s.length;i<o;i++){var l,r=a[s[i]][n],c=s[i];for(r.cells||(r.cells=[]);c<a.length;)l=a[c][n],r!==l&&r.cells.push(l),c++}this.headerMapping=a},h.prototype.refresh=function(){this._initCells(),this.$table.trigger(o.refresh,[this])},h.prototype._getToolbarAnchor=function(){var e=this.$table.parent();return e.is(".tablesaw-overflow")?e:this.$table},h.prototype._getToolbar=function(e){return e||(e=this._getToolbarAnchor()),e.prev().filter("."+i.toolbar)},h.prototype.createToolbar=function(){var t=this._getToolbarAnchor(),a=this._getToolbar(t);a.length||(a=e("<div>").addClass(i.toolbar).insertBefore(t)),this.$toolbar=a,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},h.prototype.destroy=function(){this._getToolbar().each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var n=this.$table.attr("id");e(a).off("."+n),e(t).off("."+n),this.$table.trigger(o.destroy,[this]),this.$table.removeData(s)},e.fn[s]=function(){return this.each(function(){var t=e(this);t.data(s)||new h(this)})};var u=e(a);u.on("enhance.tablesaw",function(t){if(n.mustard){var a=e(t.target);a.parent().length&&(a=a.parent()),a.find(r).filter(c)[s]()}});var b,f=!1;u.on("scroll.tablesaw",function(){f=!0,t.clearTimeout(b),b=t.setTimeout(function(){f=!1},300)});var p;e(t).on("resize",function(){f||(t.clearTimeout(p),p=t.setTimeout(function(){u.trigger(o.resize)},150))}),n.Table=h}(),function(){var t={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label",cellContentLabels:"tablesaw-cell-content"},s={key:"tablesaw-stack"},i={labelless:"data-tablesaw-no-labels",hideempty:"data-tablesaw-hide-empty"},o=function(t,a){this.tablesaw=a,this.$table=e(t),this.labelless=this.$table.is("["+i.labelless+"]"),this.hideempty=this.$table.is("["+i.hideempty+"]"),this.$table.data(s.key,this)};o.prototype.init=function(){if(this.$table.addClass(t.stackTable),!this.labelless){var s=this;this.$table.find("th, td").filter(function(){return!e(this).closest("thead").length}).filter(function(){return!(e(this).is("["+i.labelless+"]")||e(this).closest("tr").is("["+i.labelless+"]")||s.hideempty&&!e(this).html())}).each(function(){var n=e(a.createElement("b")).addClass(t.cellLabels),i=e(this);e(s.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var s=e(this.cloneNode(!0)),i=s.find(".tablesaw-sortable-btn");s.find(".tablesaw-sortable-arrow").remove();var o=s.find("[data-tablesaw-checkall]");if(o.closest("label").remove(),o.length)return void(n=e([]));t>0&&n.append(a.createTextNode(", "));for(var l,r=i.length?i[0]:s[0];l=r.firstChild;)n[0].appendChild(l)}),n.length&&!i.find("."+t.cellContentLabels).length&&i.wrapInner("<span class='"+t.cellContentLabels+"'></span>");var o=i.find("."+t.cellLabels);o.length?o.replaceWith(n):(i.prepend(a.createTextNode(" ")),i.prepend(n))})}},o.prototype.destroy=function(){this.$table.removeClass(t.stackTable),this.$table.find("."+t.cellLabels).remove(),this.$table.find("."+t.cellContentLabels).each(function(){e(this).replaceWith(e(this.childNodes))})},e(a).on(n.events.create,function(e,t){if("stack"===t.mode){var a=new o(t.table,t);a.init()}}).on(n.events.refresh,function(t,a){"stack"===a.mode&&e(a.table).data(s.key).init()}).on(n.events.destroy,function(t,a){"stack"===a.mode&&e(a.table).data(s.key).destroy()}),n.Stack=o}(),function(){var t="tablesawbtn",s={_create:function(){return e(this).each(function(){e(this).trigger("beforecreate."+t)[t]("_init").trigger("create."+t)})},_init:function(){var a=e(this),s=this.getElementsByTagName("select")[0];return s&&e(this).addClass("btn-select tablesaw-btn-select")[t]("_select",s),a},_select:function(t){var s=function(t,s){var n,i,o=e(s).find("option"),l=a.createElement("span"),r=!1;if(l.setAttribute("aria-hidden","true"),l.innerHTML="&#160;",o.each(function(){var e=this;e.selected&&(l.innerHTML=e.text)}),i=t.childNodes,o.length>0){for(var c=0,d=i.length;c<d;c++)n=i[c],n&&"SPAN"===n.nodeName.toUpperCase()&&(t.replaceChild(l,n),r=!0);r||t.insertBefore(l,t.firstChild)}};s(this,t),e(this).on("change refresh",function(){s(this,t)})}};e.fn[t]=function(a,s,n,i){return this.each(function(){return a&&"string"==typeof a?e.fn[t].prototype[a].call(this,s,n,i):e(this).data(t+"active")?e(this):(e(this).data(t+"active",!0),void e.fn[t].prototype._create.call(this))})},e.extend(e.fn[t].prototype,s)}(),function(){var s={key:"tablesaw-coltoggle"},i=function(t){this.$table=e(t),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={btnTarget:"data-tablesaw-columntoggle-btn-target",set:"data-tablesaw-columntoggle-set"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-"},this.set=[],this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(s.key,this))};i.prototype.initSet=function(){var t=this.$table.attr(this.attributes.set);if(t){var a=this.$table[0];this.set=e("table["+this.attributes.set+"='"+t+"']").filter(function(){return this!==a}).get()}},i.prototype.init=function(){function i(e){var t=e.checked,a=f.getHeaderFromCheckbox(e),s=f.tablesaw._$getCells(a);s[t?"removeClass":"addClass"]("tablesaw-toggle-cellhidden"),s[t?"addClass":"removeClass"]("tablesaw-toggle-cellvisible"),f.updateColspanCells(a,t),f.$table.trigger("tablesawcolumns")}function o(t){t&&e(t.target).closest("."+f.classes.popup).length||(e(a).off("click."+r),d.removeClass("up").addClass("down"),b.removeClass("visible"))}function l(){b.addClass("visible"),d.removeClass("down").addClass("up"),e(a).off("click."+r,o),t.clearTimeout(v),v=t.setTimeout(function(){e(a).on("click."+r,o)},15)}if(this.$table.length){var r,c,d,h,u,b,f=this,p=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(e){return"<label><input type='checkbox' checked>"+e+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),r=this.$table.attr("id"),c=r+"-popup",b=e("<div class='"+this.classes.columnBtnContain+"'></div>"),d=e("<a href='#"+c+"' class='btn tablesaw-btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+n.i18n.columnToggleButton+"</span></a>"),h=e("<div class='"+this.classes.popup+"' id='"+c+"'></div>"),u=e("<div class='tablesaw-btn-group'></div>"),this.$popup=h;var g=!1;this.$headers.each(function(){var t=e(this),a=t.attr("data-tablesaw-priority"),s=f.tablesaw._$getCells(this);a&&"persist"!==a&&(s.addClass(f.classes.priorityPrefix+a),e(p.getColumnToggleLabelTemplate(t.text())).appendTo(u).find('input[type="checkbox"]').data("tablesaw-header",this),g=!0)}),g||u.append("<label>"+n.i18n.columnToggleError+"</label>"),u.appendTo(h),u.find('input[type="checkbox"]').on("change",function(t){if(i(t.target),f.set.length){var a;e(f.$popup).find("input[type='checkbox']").each(function(e){if(this===t.target)return a=e,!1}),e(f.set).each(function(){var n=e(this).data(s.key).$popup.find("input[type='checkbox']").get(a);n&&(n.checked=t.target.checked,i(n))})}}),d.appendTo(b);var w=e(this.$table.attr(this.attributes.btnTarget));b.appendTo(w.length?w:this.tablesaw.$toolbar);var v;d.on("click.tablesaw",function(e){e.preventDefault(),b.is(".visible")?o():l()}),h.appendTo(b),this.$menu=u;var m=this.$table.closest(".tablesaw-overflow");if(m.css("-webkit-overflow-scrolling")){var C;m.on("scroll",function(){var a=e(this);t.clearTimeout(C),C=t.setTimeout(function(){a.css("-webkit-overflow-scrolling","auto"),t.setTimeout(function(){a.css("-webkit-overflow-scrolling","touch")},0)},100)})}e(t).on(n.events.resize+"."+r,function(){f.refreshToggle()}),this.initSet(),this.refreshToggle()}},i.prototype.getHeaderFromCheckbox=function(t){return e(t).data("tablesaw-header")},i.prototype.refreshToggle=function(){var e=this;this.$menu.find("input").each(function(){var t=e.getHeaderFromCheckbox(this);this.checked="table-cell"===e.tablesaw._$getCells(t).eq(0).css("display")}),this.updateColspanCells()},i.prototype.updateColspanCells=function(e,t){this.tablesaw.updateColspanCells("tablesaw-toggle-cellhidden",e,t)},i.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){var t=e(this);t.removeClass("tablesaw-toggle-cellhidden").removeClass("tablesaw-toggle-cellvisible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},e(a).on(n.events.create,function(e,t){if("columntoggle"===t.mode){var a=new i(t.table);a.init()}}),e(a).on(n.events.destroy,function(t,a){"columntoggle"===a.mode&&e(a.table).data(s.key).destroy()}),e(a).on(n.events.refresh,function(t,a){"columntoggle"===a.mode&&e(a.table).data(s.key).refreshToggle()}),n.ColumnToggle=i}(),function(){function t(t){var a=[];return e(t.childNodes).each(function(){var t=e(this);t.is("input, select")?a.push(t.val()):t.is(".tablesaw-cell-label")||a.push((t.text()||"").replace(/^\s+|\s+$/g,""))}),a.join("")}var s="tablesaw-sortable",i="table[data-"+s+"]",o="[data-"+s+"-switch]",l={sortCol:"data-tablesaw-sortable-col",defaultCol:"data-tablesaw-sortable-default-col",numericCol:"data-tablesaw-sortable-numeric",subRow:"data-tablesaw-subrow",ignoreRow:"data-tablesaw-ignorerow"},r={head:s+"-head",ascend:s+"-ascending",descend:s+"-descending",switcher:s+"-switch",tableToolbar:"tablesaw-bar-section",sortButton:s+"-btn"},c={_create:function(t){return e(this).each(function(){var a=e(this).data(s+"-init");return!a&&void e(this).data(s+"-init",!0).trigger("beforecreate."+s)[s]("_init",t).trigger("create."+s)})},_init:function(){function a(t){e.each(t,function(t,a){e(a).addClass(r.head)})}function i(t,a){e.each(t,function(t,s){var n=e("<button class='"+r.sortButton+"'/>");n.on("click",{col:s},a),e(s).wrapInner(n).find("button").append("<span class='tablesaw-sortable-arrow'>")})}function c(t){e.each(t,function(t,a){var s=e(a);s.removeAttr(l.defaultCol),s.removeClass(r.ascend),s.removeClass(r.descend)})}function d(t){if(!e(t.target).is("a[href]")){t.stopPropagation();var a=e(t.target).closest("["+l.sortCol+"]"),n=t.data.col,i=b.index(a[0]);c(a.closest("thead").find("th").filter(function(){return this!==a[0]})),a.is("."+r.descend)||!a.is("."+r.ascend)?(p[s]("sortBy",n,!0),i+="_asc"):(p[s]("sortBy",n),i+="_desc"),f&&f.find("select").val(i).trigger("refresh"),t.preventDefault()}}function h(t){e.each(t,function(t,a){var s=e(a);s.is("["+l.defaultCol+"]")&&(s.is("."+r.descend)||s.addClass(r.ascend))})}function u(a){f=e("<div>").addClass(r.switcher).addClass(r.tableToolbar);var i=["<label>"+n.i18n.sort+":"];i.push('<span class="btn tablesaw-btn"><select>'),a.each(function(a){var s=e(this),n=s.is("["+l.defaultCol+"]"),o=s.is("."+r.descend),c=s.is("["+l.numericCol+"]"),d=0,h=5;e(this.cells.slice(0,h)).each(function(){isNaN(parseInt(t(this),10))||d++});var u=d===h;c||s.attr(l.numericCol,u?"":"false"),i.push("<option"+(n&&!o?" selected":"")+' value="'+a+'_asc">'+s.text()+" "+(u?"&#x2191;":"(A-Z)")+"</option>"),i.push("<option"+(n&&o?" selected":"")+' value="'+a+'_desc">'+s.text()+" "+(u?"&#x2193;":"(Z-A)")+"</option>")}),i.push("</select></span></label>"),f.html(i.join(""));var o=g.$toolbar.children().eq(0);o.length?f.insertBefore(o):f.appendTo(g.$toolbar),f.find(".tablesaw-btn").tablesawbtn(),f.find("select").on("change",function(){var t=e(this).val().split("_"),n=a.eq(t[0]);c(n.siblings()),p[s]("sortBy",n.get(0),"asc"===t[1])})}var b,f,p=e(this),g=p.data("tablesaw");p.addClass(s),b=p.children().filter("thead").find("th["+l.sortCol+"]"),a(b),i(b,d),h(b),p.is(o)&&u(b)},sortRows:function(a,s,n,i,o){function r(a,s){var n=[];return e.each(a,function(a,i){for(var o=i.parentNode,r=e(o),c=[],d=r.next();d.is("["+l.subRow+"]");)c.push(d[0]),d=d.next();var h=o.parentNode;r.is("["+l.subRow+"]")||h===s&&n.push({element:i,cell:t(i),row:o,subrows:c.length?c:null,ignored:r.is("["+l.ignoreRow+"]")})}),n}function c(e,t){var a,s=/[^\-\+\d\.]/g;return a=e?function(e,a){return e.ignored||a.ignored?0:t?parseFloat(e.cell.replace(s,""))-parseFloat(a.cell.replace(s,"")):e.cell.toLowerCase()>a.cell.toLowerCase()?1:-1}:function(e,a){return e.ignored||a.ignored?0:t?parseFloat(a.cell.replace(s,""))-parseFloat(e.cell.replace(s,"")):e.cell.toLowerCase()<a.cell.toLowerCase()?1:-1}}function d(e){var t,a,s=[];for(t=0,a=e.length;t<a;t++)s.push(e[t].row),e[t].subrows&&s.push(e[t].subrows);return s}var h,u,b=r(i.cells,o),f=e(i).data("tablesaw-sort");return h=!(!f||"function"!=typeof f)&&f(n)||c(n,e(i).is("["+l.numericCol+"]")&&!e(i).is("["+l.numericCol+'="false"]')),u=b.sort(h),a=d(u)},makeColDefault:function(t,a){var s=e(t);s.attr(l.defaultCol,"true"),a?(s.removeClass(r.descend),s.addClass(r.ascend)):(s.removeClass(r.ascend),s.addClass(r.descend))},sortBy:function(t,a){var n,i=e(this),o=i.data("tablesaw");o.$tbody.each(function(){var l,r,c,d=this,h=e(this),u=o.getBodyRows(d),b=o.headerMapping[0];for(r=0,c=b.length;r<c;r++)if(b[r]===t){n=r;break}for(l=i[s]("sortRows",u,n,a,t,d),r=0,c=l.length;r<c;r++)h.append(l[r])}),i[s]("makeColDefault",t,a),i.trigger("tablesaw-sorted")}};e.fn[s]=function(t){var a,n=Array.prototype.slice.call(arguments,1);return t&&"string"==typeof t?(a=e.fn[s].prototype[t].apply(this[0],n),"undefined"!=typeof a?a:e(this)):(e(this).data(s+"-active")||(e(this).data(s+"-active",!0),e.fn[s].prototype._create.call(this,t)),e(this))},e.extend(e.fn[s].prototype,c),e(a).on(n.events.create,function(e,t){t.$table.is(i)&&t.$table[s]()})}(),function(){function s(s,l){function r(){l.css({width:"1px"}),l.find("."+i.hiddenCol).removeClass(i.hiddenCol),H=[],N=[],S.each(function(){var e=this.offsetWidth;H.push(e),u(this)||N.push(e)}),l.css({width:""})}function c(e){T._$getCells(e).removeClass(i.hiddenCol)}function d(e){T._$getCells(e).addClass(i.hiddenCol)}function h(e){T._$getCells(e).addClass(i.persistCol)}function u(t){return e(t).is('[data-tablesaw-priority="persist"]')}function b(){l.removeClass(i.persistWidths),e("#"+A+"-persist").remove()}function f(){var t,a="#"+A+".tablesaw-swipe ",s=[],n=l.width(),o=n,r=[];if(S.each(function(e){var t;u(this)&&(t=this.offsetWidth,o-=t,t<.75*n&&(r.push(e+"-"+t),s.push(a+" ."+i.persistCol+":nth-child("+(e+1)+") { width: "+t+"px; }")))}),t=r.join("_"),s.length){l.addClass(i.persistWidths);var c=e("#"+A+"-persist");c.length&&c.data("tablesaw-hash")===t||(c.remove(),e("<style>"+s.join("\n")+"</style>").attr("id",A+"-persist").data("tablesaw-hash",t).appendTo(R))}return o}function p(){var t,a=[];return B.each(function(s){var n=e(this),o="none"===n.css("display")||n.is("."+i.hiddenCol);if(o||t){if(o&&t)return a[1]=s,!1}else t=!0,a[0]=s}),a}function g(){var e=p();return[e[1]-1,e[0]-1]}function w(e){return e[1]>-1&&e[1]<B.length}function v(){var e=l.attr("data-tablesaw-swipe-media");return!e||"matchMedia"in t&&t.matchMedia(e).matches}function m(){if(v()){var t=l.parent().width(),a=[],s=0,n=[],o=S.length;S.each(function(i){var l=e(this),r=l.is('[data-tablesaw-priority="persist"]');a.push(r),s+=H[i],n.push(s),(r||s>t)&&o--});var r=0===o;S.each(function(e){n[e]>t&&d(this)});var u=!0;S.each(function(e){return a[e]?(h(this),void(u&&(T._$getCells(this).css("width",n[e]+"px"),u=!1))):void((n[e]<=t||r)&&(r=!1,c(this),T.updateColspanCells(i.hiddenCol,this,!0)))}),b(),l.trigger("tablesawcolumns")}}function C(){$(!0)}function y(){$(!1)}function $(e){var t;if(t=e?p():g(),w(t)){isNaN(t[0])&&(e?t[0]=0:t[0]=B.length-1);var a,s=f(),n=t[0],o=t[1],r=B.get(n),h=!1,u=!1;d(r),T.updateColspanCells(i.hiddenCol,r,!0);for(var b=n+(e?1:-1);b>=0&&b<N.length;){s-=N[b];var v=B.eq(b);v.is(".tablesaw-swipe-cellhidden")?s>0&&(a=v.get(0),h=!0,u=!0,c(a),T.updateColspanCells(i.hiddenCol,a,!1)):u=!0,e?b++:b--}u?!h&&w(e?p():g())&&$(e):(a=B.get(o),c(a),T.updateColspanCells(i.hiddenCol,a,!1)),l.trigger("tablesawcolumns")}}function k(e,t){return(e.touches||e.originalEvent.touches)[0][t]}var T=l.data("tablesaw"),x=e("<div class='tablesaw-advance'></div>"),_=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left'>"+n.i18n.swipePreviousColumn+"</a>").appendTo(x),M=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right'>"+n.i18n.swipeNextColumn+"</a>").appendTo(x),S=s._getPrimaryHeaderCells(),B=S.not('[data-tablesaw-priority="persist"]'),H=[],N=[],R=e(a.head||"head"),A=l.attr("id");if(!S.length)throw new Error("tablesaw swipe: no header cells found.");l.addClass("tablesaw-swipe"),r(),x.appendTo(T.$toolbar),A||(A="tableswipe-"+Math.round(1e4*Math.random()),l.attr("id",A)),_.add(M).on("click",function(t){e(t.target).closest(M).length?C():y(),t.preventDefault()}),l.is("["+o.disableTouchEvents+"]")||l.on("touchstart.swipetoggle",function(a){var i,o,l=k(a,"pageX"),r=k(a,"pageY"),c=t.pageYOffset;e(t).off(n.events.resize,m),e(this).on("touchmove.swipetoggle",function(e){i=k(e,"pageX"),o=k(e,"pageY")}).on("touchend.swipetoggle",function(){var a=s.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),d=a.swipe?a.swipe.verticalThreshold:a.swipeVerticalThreshold,h=a.swipe?a.swipe.horizontalThreshold:a.swipeHorizontalThreshold,u=Math.abs(t.pageYOffset-c)>=d,b=Math.abs(o-r)>=d;b||u||(i-l<-1*h&&C(),i-l>h&&y()),t.setTimeout(function(){e(t).on(n.events.resize,m)},300),e(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),l.on("tablesawcolumns.swipetoggle",function(){var e=w(g()),t=w(p());_[e?"removeClass":"addClass"](i.hideBtn),M[t?"removeClass":"addClass"](i.hideBtn),T.$toolbar[e||t?"removeClass":"addClass"](i.allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){C()}).on("tablesawprev.swipetoggle",function(){y()}).on(n.events.destroy+".swipetoggle",function(){var a=e(this);a.removeClass("tablesaw-swipe"),T.$toolbar.find(".tablesaw-advance").remove(),e(t).off(n.events.resize,m),a.off(".swipetoggle")}).on(n.events.refresh,function(){b(),r(),m()}),m(),e(t).on(n.events.resize,m)}var i={hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",hiddenCol:"tablesaw-swipe-cellhidden",persistCol:"tablesaw-swipe-cellpersist",allColumnsVisible:"tablesaw-all-cols-visible"},o={disableTouchEvents:"data-tablesaw-no-touch",ignorerow:"data-tablesaw-ignorerow",subrow:"data-tablesaw-subrow"};e(a).on(n.events.create,function(e,t){"swipe"===t.mode&&s(t,t.$table)})}(),function(){function s(a){function s(){if(!i.show(a[0]))return void l.css("display","none");l.css("display","block");var t=r.find("li").removeClass(c);a.find("thead th").each(function(a){"none"===e(this).css("display")&&t.eq(a).addClass(c)})}var o=a.data("tablesaw"),l=e('<div class="tablesaw-advance minimap">'),r=e('<ul class="tablesaw-advance-dots">').appendTo(l),c="tablesaw-advance-dots-hide",d=a.data("tablesaw")._getPrimaryHeaderCells();d.each(function(){r.append("<li><i></i></li>")}),l.appendTo(o.$toolbar),s(),e(t).on(n.events.resize,s),a.on("tablesawcolumns.minimap",function(){s()}).on(n.events.destroy+".minimap",function(){var a=e(this);o.$toolbar.find(".tablesaw-advance").remove(),e(t).off(n.events.resize,s),a.off(".minimap")})}var i={attr:{init:"data-tablesaw-minimap"},show:function(e){var a=e.getAttribute(i.attr.init);return""===a||!!(a&&"matchMedia"in t)&&t.matchMedia(a).matches}};e(a).on(n.events.create,function(e,t){"swipe"!==t.mode&&"columntoggle"!==t.mode||!t.$table.is("[ "+i.attr.init+"]")||s(t.$table)}),n.MiniMap=i}(),function(){var t={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-bar-section"},modes:["stack","swipe","columntoggle"],init:function(a){var s,i=e(a),o=i.data("tablesaw"),l=i.attr(t.attributes.excludeMode),r=o.$toolbar,c=e("<div>").addClass(t.classes.main+" "+t.classes.toolbar),d=['<label><span class="abbreviated">'+n.i18n.modeSwitchColumnsAbbreviated+'</span><span class="longform">'+n.i18n.modeSwitchColumns+"</span>:"],h=i.attr("data-tablesaw-mode");d.push('<span class="btn tablesaw-btn"><select>');for(var u=0,b=t.modes.length;u<b;u++)l&&l.toLowerCase()===t.modes[u]||(s=h===t.modes[u],d.push("<option"+(s?" selected":"")+' value="'+t.modes[u]+'">'+n.i18n.modes[u]+"</option>"));d.push("</select></span></label>"),c.html(d.join(""));var f=r.find(".tablesaw-advance").eq(0);f.length?c.insertBefore(f):c.appendTo(r),c.find(".tablesaw-btn").tablesawbtn(),c.find("select").on("change",function(s){return t.onModeChange.call(a,s,e(this).val())})},onModeChange:function(a,s){var n=e(this),i=n.data("tablesaw"),o=i.$toolbar.find("."+t.classes.main);o.remove(),i.destroy(),n.attr("data-tablesaw-mode",s),n.tablesaw()}};e(a).on(n.events.create,function(e,a){a.$table.is(t.selectors.init)&&t.init(a.table)})}(),function(){function t(e){this.tablesaw=e,this.$table=e.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(s)||(this.$table.data(s,this),this.init())}var s="tablesawCheckAll";t.prototype._filterCells=function(t){return t.filter(function(){return!e(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},t.prototype.getCheckboxesForButton=function(t){return this._filterCells(e(e(t).attr(this.attr)))},t.prototype.getCheckboxesForCheckbox=function(t){return this._filterCells(e(e(t).closest("th")[0].cells))},t.prototype.init=function(){var t=this;this.$table.find(this.checkAllSelector).each(function(){var a=e(this);a.is(t.checkboxSelector)?t.addCheckboxEvents(this):t.addButtonEvents(this)})},t.prototype.addButtonEvents=function(t){var a=this;e(t).on("click",function(t){t.preventDefault();var n=a.getCheckboxesForButton(this),i=!0;n.each(function(){this.checked||(i=!1)});var o;o=!!e(this).is(a.forceCheckedSelector)||!e(this).is(a.forceUncheckedSelector)&&!i,n.each(function(){this.checked=o,e(this).trigger("change."+s)})})},t.prototype.addCheckboxEvents=function(t){var a=this;e(t).on("change",function(){var e=this.checked;a.getCheckboxesForCheckbox(this).each(function(){this.checked=e})});var n=a.getCheckboxesForCheckbox(t);n.on("change."+s,function(){var e=0;n.each(function(){this.checked&&e++});var a=e===n.length;t.checked=a,t.indeterminate=0!==e&&!a})},e(a).on(n.events.create,function(e,a){new t(a)}),n.CheckAll=t}(),n});